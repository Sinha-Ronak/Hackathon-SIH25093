<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Faculty Portal</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter Font -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            transition: background-color 0.3s ease;
        }

        /* Custom CSS for animations and transitions from f2.html */
        .page-content {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
        }
        .page-content.active {
            opacity: 1;
            transform: translateY(0);
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .scale-in {
            animation: scaleIn 0.3s ease-out;
        }
        @keyframes scaleIn {
            from { transform: scale(0.95); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .sidebar-link.active {
            background-color: #3b82f6;
            color: white;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        /* Custom CSS from f3.html */
        @keyframes floaty { 0%{ transform: translateY(0) } 50%{ transform: translateY(-6px)} 100%{ transform: translateY(0)} }
        .floaty { animation: floaty 3.5s ease-in-out infinite; }
        .glass { backdrop-filter: blur(6px); background-color: rgba(255,255,255,0.6); }
        .sidebar-scroll { max-height: calc(100vh - 4rem); overflow:auto }
        /* tiny table zebra */
        .zebra tr:nth-child(odd) { background: rgba(0,0,0,0.02) }
        /* status badges */
        .status-pending { background:#fff7ed; color:#92400e }
        .status-approved { background:#ecfdf5; color:#065f46 }
        .status-rejected { background:#fef2f2; color:#7f1d1d }

        /* Responsive sidebar for mobile */
        #sidebar.mobile-hidden {
            transform: translateX(-100%);
        }
        #sidebar.mobile-show {
            transform: translateX(0);
        }
        @media (min-width: 768px) {
            #sidebar.mobile-hidden {
                transform: translateX(0); /* Always visible on desktop */
            }
        }
    </style>
</head>
<body class="flex min-h-screen antialiased bg-gradient-to-br from-slate-50 to-slate-100 text-slate-800">
    <!-- Main container -->
    <div class="flex-1 flex flex-col">
        <!-- Header -->
        <header class="bg-white shadow-md p-4 flex items-center justify-between sticky top-0 z-50">
            <div class="flex items-center space-x-4">
                <button id="burger" class="md:hidden p-2 rounded-md hover:bg-slate-100" aria-label="toggle menu">
                    <!-- burger -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg>
                </button>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-blue-500 animate-pulse hidden md:block" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2l8 4v8l-8 4-8-4V6z"/><path d="M12 2v10"/><path d="M20 6v10l-8 4-8-4V6"/></svg>
                <h1 class="text-2xl font-bold text-gray-800">Faculty Portal</h1>
            </div>
            <div class="flex items-center space-x-4">
                <div class="hidden sm:flex items-center gap-2 p-2 rounded-lg border glass">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M2 5a2 2 0 012-2h12a2 2 0 012 2v.2L10 9 2 5.2V5z"/></svg>
                    <input id="globalSearch" placeholder="Search students or docs..." class="bg-transparent outline-none text-sm" />
                </div>
                <button class="relative p-2 rounded-full bg-gray-100 text-gray-600 hover:text-blue-500 hover:bg-blue-100 transition-all duration-300 transform hover:scale-110">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
                    </svg>
                    <span class="absolute top-1 right-1 h-3 w-3 bg-red-500 rounded-full border-2 border-white animate-ping"></span>
                    <span id="notifCount" class="absolute top-1 right-1 h-3 w-3 bg-red-500 rounded-full text-white text-xs flex items-center justify-center">3</span>
                </button>
                <div class="flex items-center gap-2 p-2 rounded-full hover:shadow-sm cursor-pointer">
                    <img src="https://i.pravatar.cc/40?img=12" class="w-9 h-9 rounded-full" alt="dp"/>
                </div>
            </div>
        </header>

        <!-- Main content area -->
        <div class="flex flex-1 overflow-hidden">
            <!-- Sidebar -->
            <aside id="sidebar" class="w-64 bg-gray-50 p-6 flex flex-col space-y-2 border-r border-gray-200 transition-all duration-300 transform -translate-x-full md:translate-x-0 absolute md:relative z-20 h-full bg-white mobile-hidden">
                <div class="hidden md:flex items-center gap-3 mb-6">
                    <div class="w-10 h-10 rounded-full overflow-hidden bg-gradient-to-br from-indigo-500 to-pink-500 flex items-center justify-center text-white font-bold">FH</div>
                    <div>
                        <div class="text-lg font-semibold">Faculty Hub</div>
                        <div class="text-xs text-slate-500">Hackathon Edition</div>
                    </div>
                </div>
                <nav class="flex-1 sidebar-scroll">
                    <ul class="space-y-1">
                        <li><a href="#dashboard" class="sidebar-link flex items-center space-x-3 p-3 rounded-lg text-gray-700 font-medium hover:bg-gray-200 transition-colors duration-200" data-page="dashboard">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" /></svg>
                            <span>Dashboard</span>
                        </a></li>
                        <li><a href="#docs-verify" class="sidebar-link flex items-center space-x-3 p-3 rounded-lg text-gray-700 font-medium hover:bg-gray-200 transition-colors duration-200" data-page="docs-verify">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M9 12l2 2 4-4m5.618-4.016A11.955 111.955 0 0112 2.944c-1.284 0-2.522.28-3.618.816M14 16h-4m2 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                            <span>Docs Verify</span>
                        </a></li>
                        <li><a href="#upload-attendance" class="sidebar-link flex items-center space-x-3 p-3 rounded-lg text-gray-700 font-medium hover:bg-gray-200 transition-colors duration-200" data-page="attendance">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M10 16h.01" /></svg>
                            <span>Attendance</span>
                        </a></li>
                        <li><a href="#leave-application" class="sidebar-link flex items-center space-x-3 p-3 rounded-lg text-gray-700 font-medium hover:bg-gray-200 transition-colors duration-200" data-page="leave">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 7v4m-5 3h4m0 0v-4m0 4h4m-4 0v4m0 0H8m4 0v-4m0 4h-4m4-4h4m0-4h4m-4 0V7a2 2 0 00-2-2h-4a2 2 0 00-2 2v4m0 0h4m-4 0v4m4 0h4m-4 0v4m0 0H8a2 2 0 00-2 2v4a2 2 0 002 2h4a2 2 0 002-2v-4m0-4h4m-4 0v4" /></svg>
                            <span>Leave Application</span>
                        </a></li>
                        <li><a href="#upload-assignment" class="sidebar-link flex items-center space-x-3 p-3 rounded-lg text-gray-700 font-medium hover:bg-gray-200 transition-colors duration-200" data-page="assignment">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" /></svg>
                            <span>Upload Assignment</span>
                        </a></li>
                        <li><a href="#view-class-details" class="sidebar-link flex items-center space-x-3 p-3 rounded-lg text-gray-700 font-medium hover:bg-gray-200 transition-colors duration-200" data-page="classdetails">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 11H5m14 0a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2V13a2 2 0 012-2m14 0V9a2 2 0 00-2-2H7a2 2 0 00-2 2v2" /></svg>
                            <span>Class Details</span>
                        </a></li>
                        <hr class="border-t my-2">
                        <li><a href="#leaderboard" class="sidebar-link flex items-center space-x-3 p-3 rounded-lg text-gray-700 font-medium hover:bg-gray-200 transition-colors duration-200" data-page="leaderboard">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 19V6l12-3v14H9m-3 0V6a2 2 0 00-2-2H4a2 2 0 00-2 2v12a2 2 0 002 2h2m-2-2H4" /></svg>
                            <span>Leaderboard</span>
                        </a></li>
                        <li><a href="#inbox" class="sidebar-link flex items-center space-x-3 p-3 rounded-lg text-gray-700 font-medium hover:bg-gray-200 transition-colors duration-200" data-page="inbox">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8m-6 5l-4 4m-4 0l-4-4m8 4h-4" /></svg>
                            <span>Inbox</span>
                        </a></li>
                        <li><a href="#social-profile" class="sidebar-link flex items-center space-x-3 p-3 rounded-lg text-gray-700 font-medium hover:bg-gray-200 transition-colors duration-200" data-page="profile">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>
                            <span>Profile</span>
                        </a></li>
                    </ul>
                </nav>
                <div class="mt-4 hidden md:block">
                    <div class="text-xs text-slate-500 mb-2">Quick actions</div>
                    <div class="flex gap-2">
                        <button class="flex-1 py-2 rounded-lg bg-indigo-600 text-white hover:shadow-md transition">New Assignment</button>
                        <button class="p-2 rounded-lg border hover:bg-slate-50" title="Notifications">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6z"/></svg>
                        </button>
                    </div>
                </div>
            </aside>

            <!-- Page content sections -->
            <main class="flex-1 p-8 overflow-y-auto">
                <!-- DASHBOARD -->
                <section id="dashboard-page" class="page-content active">
                    <h2 class="text-3xl font-bold text-gray-800 mb-6 border-b pb-2">Faculty Dashboard</h2>
                    <div class="bg-white rounded-lg shadow-lg p-8 scale-in">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div class="col-span-2">
                                <div class="flex items-center justify-between">
                                    <h2 class="text-lg font-semibold">Overview</h2>
                                    <div class="text-sm text-slate-500">Updated just now</div>
                                </div>

                                <div class="mt-4 grid grid-cols-1 sm:grid-cols-3 gap-4">
                                    <div class="p-4 rounded-lg border shadow-sm bg-gradient-to-br from-white to-slate-50">
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <div class="text-sm text-slate-500">Classes handled</div>
                                                <div class="text-2xl font-bold">6</div>
                                            </div>
                                            <div class="p-2 rounded-full bg-indigo-50 floaty">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-indigo-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3M3 11h18M5 21h14a2 2 0 002-2V7H3v12a2 2 0 002 2z"/></svg>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="p-4 rounded-lg border shadow-sm">
                                        <div class="text-sm text-slate-500">Avg Attendance</div>
                                        <div class="text-2xl font-bold">86%</div>
                                        <div class="mt-2 text-xs text-slate-400">Last 30 days</div>
                                    </div>

                                    <div class="p-4 rounded-lg border shadow-sm">
                                        <div class="text-sm text-slate-500">Pending Documents</div>
                                        <div class="text-2xl font-bold" id="pendingDocsCount">4</div>
                                        <div class="mt-2 text-xs text-slate-400">Need action</div>
                                    </div>
                                </div>

                                <div class="mt-6">
                                    <h3 class="text-md font-semibold mb-2">Recent Activity</h3>
                                    <ul class="space-y-3">
                                        <li class="p-3 rounded-lg border flex items-start gap-3">
                                            <div class="w-10 h-10 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600">A</div>
                                            <div>
                                                <div class="text-sm"><strong>Assignment:</strong> New assignment published for CS101</div>
                                                <div class="text-xs text-slate-400">2 hours ago</div>
                                            </div>
                                        </li>
                                        <li class="p-3 rounded-lg border flex items-start gap-3">
                                            <div class="w-10 h-10 rounded-full bg-emerald-100 flex items-center justify-center text-emerald-600">D</div>
                                            <div>
                                                <div class="text-sm"><strong>Document:</strong> Riya Singh uploaded ID proof</div>
                                                <div class="text-xs text-slate-400">4 hours ago</div>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </div>

                            <aside class="p-4 rounded-lg border shadow-sm">
                                <div class="flex items-center gap-3 mb-4">
                                    <img src="https://i.pravatar.cc/60?img=47" class="w-12 h-12 rounded-full" alt="dp"/>
                                    <div>
                                        <div class="font-semibold">Prof. Neha Sharma</div>
                                        <div class="text-xs text-slate-500">Mathematics • HOD</div>
                                    </div>
                                </div>

                                <div class="text-sm text-slate-500 mb-2">Quick Stats</div>
                                <div class="flex items-center justify-between mb-2">
                                    <div class="text-xs">Classes</div>
                                    <div class="font-semibold">6</div>
                                </div>
                                <div class="flex items-center justify-between mb-2">
                                    <div class="text-xs">Avg Attendance</div>
                                    <div class="font-semibold">86%</div>
                                </div>
                                <div class="flex items-center justify-between">
                                    <div class="text-xs">Avg Grade</div>
                                    <div class="font-semibold">74%</div>
                                </div>

                                <div class="mt-4">
                                    <button class="w-full py-2 rounded-lg bg-indigo-600 text-white">View Class Details</button>
                                </div>
                            </aside>
                        </div>
                    </div>
                </section>

                <!-- Docs Verify Page -->
                <section id="docs-verify-page" class="page-content hidden">
                    <h2 class="text-3xl font-bold text-gray-800 mb-6 border-b pb-2">Document Verification</h2>
                    <div class="bg-white rounded-lg shadow-lg p-8 fade-in">
                        <div class="flex justify-start mb-4 space-x-2">
                            <select id="docsFilter" class="p-2 rounded border text-sm">
                                <option value="all">All</option>
                                <option value="pending">Pending</option>
                                <option value="verified">Verified</option>
                                <option value="rejected">Rejected</option>
                            </select>
                            <button id="bulkApprove" class="py-2 px-3 rounded bg-emerald-600 text-white text-sm">Bulk Approve</button>
                        </div>
                        <div class="overflow-x-auto rounded-lg border border-gray-200">
                            <table class="min-w-full divide-y divide-gray-200 zebra">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Student Name</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Document Name</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Action</th>
                                    </tr>
                                </thead>
                                <tbody id="docsTable" class="bg-white divide-y divide-gray-200">
                                    <!-- Dynamic content will be loaded here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <!-- Upload Attendance Page -->
                <section id="upload-attendance-page" class="page-content hidden">
                    <h2 class="text-3xl font-bold text-gray-800 mb-6 border-b pb-2">Upload Attendance</h2>
                    <div class="bg-white rounded-lg shadow-lg p-8 fade-in">
                        <div class="flex items-center justify-between mb-4">
                            <h2 class="text-lg font-semibold">Upload Attendance</h2>
                            <div class="text-sm text-slate-500">Class: CS101 • 40 students</div>
                        </div>
                        <div class="border rounded-lg overflow-auto">
                            <table class="w-full text-sm">
                                <thead class="bg-slate-50 text-slate-500">
                                    <tr>
                                        <th class="p-2 sticky left-0 bg-slate-50">Student</th>
                                        <th class="p-2">01 Sep</th>
                                        <th class="p-2">02 Sep</th>
                                        <th class="p-2">03 Sep</th>
                                        <th class="p-2">04 Sep</th>
                                        <th class="p-2">05 Sep</th>
                                    </tr>
                                </thead>
                                <tbody id="attendanceBody">
                                    <!-- generated rows -->
                                </tbody>
                            </table>
                        </div>
                        <div class="mt-4 flex items-center gap-3">
                            <button id="saveAttendance" class="py-2 px-4 rounded bg-indigo-600 text-white">Submit</button>
                            <div id="attendanceMsg" class="text-sm text-slate-500"></div>
                        </div>
                    </div>
                </section>

                <!-- Leave Application Page -->
                <section id="leave-application-page" class="page-content hidden">
                    <h2 class="text-3xl font-bold text-gray-800 mb-6 border-b pb-2">Leave Application</h2>
                    <div class="bg-white rounded-lg shadow-lg p-8 fade-in">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <form id="leaveForm" class="space-y-3 p-4 border rounded-lg">
                                <div>
                                    <label for="leaveFrom" class="block text-sm font-medium text-gray-700">Date Range</label>
                                    <div class="flex gap-2 mt-1">
                                        <input type="date" id="leaveFrom" class="p-2 border rounded w-1/2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 p-3" />
                                        <input type="date" id="leaveTo" class="p-2 border rounded w-1/2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 p-3" />
                                    </div>
                                </div>
                                <div>
                                    <label for="reason" class="block text-sm font-medium text-gray-700">Reason</label>
                                    <textarea id="leaveReason" rows="4" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 p-3" placeholder="Short reason..."></textarea>
                                </div>
                                <div>
                                    <label for="leaveFile" class="block text-sm font-medium text-gray-700">Attach Document (Optional)</label>
                                    <input type="file" id="leaveFile" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 p-3">
                                </div>
                                <div class="flex items-center gap-2">
                                    <button type="submit" class="bg-blue-500 text-white font-bold py-3 px-6 rounded-full shadow-lg hover:bg-blue-600 transition-colors duration-300 transform hover:scale-105">Submit Application</button>
                                    <button type="button" id="clearLeave" class="py-2 px-4 rounded border">Clear</button>
                                </div>
                            </form>
                            <div class="p-4 border rounded-lg">
                                <h3 class="font-semibold">Status Timeline</h3>
                                <div id="leaveTimeline" class="mt-4 space-y-4">
                                    <!-- timeline entries -->
                                    <div class="text-sm text-slate-400">No applications yet.</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Upload Assignment Page -->
                <section id="upload-assignment-page" class="page-content hidden">
                    <h2 class="text-3xl font-bold text-gray-800 mb-6 border-b pb-2">Upload Assignment</h2>
                    <div class="bg-white rounded-lg shadow-lg p-8 fade-in">
                        <form id="assignForm" class="space-y-3 p-4 border rounded-lg">
                            <div>
                                <label for="assignTitle" class="block text-sm font-medium text-gray-700">Title</label>
                                <input type="text" id="assignTitle" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 focus:border-blue-500 focus:ring-blue-500" placeholder="Assignment title">
                            </div>
                            <div>
                                <label for="assignDesc" class="block text-sm font-medium text-gray-700">Description</label>
                                <textarea id="assignDesc" rows="3" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 focus:border-blue-500 focus:ring-blue-500" placeholder="Short description"></textarea>
                            </div>
                            <div>
                                <label for="assignFile" class="block text-sm font-medium text-gray-700">File Upload</label>
                                <input type="file" id="assignFile" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 focus:border-blue-500 focus:ring-blue-500">
                            </div>
                            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                <div>
                                    <label for="assignClass" class="block text-sm font-medium text-gray-700">Assign to</label>
                                    <select id="assignClass" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 focus:border-blue-500 focus:ring-blue-500">
                                        <option>CS101 - Intro to Programming</option>
                                        <option>MA102</option>
                                        <option>PH103</option>
                                        <option>All CS Students</option>
                                        <option>All Students</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="assignDeadline" class="block text-sm font-medium text-gray-700">Deadline</label>
                                    <input type="date" id="assignDeadline" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 focus:border-blue-500 focus:ring-blue-500">
                                </div>
                            </div>
                            <div class="flex items-center gap-2">
                                <button type="button" id="previewAssign" class="py-2 px-4 rounded bg-indigo-600 text-white">Preview</button>
                                <button type="submit" id="publishAssign" class="bg-indigo-500 text-white font-bold py-3 px-6 rounded-full shadow-lg hover:bg-indigo-600 transition-colors duration-300 transform hover:scale-105">Publish Assignment</button>
                            </div>
                        </form>
                        <div id="assignPreview" class="mt-4 hidden p-4 border rounded-lg">
                            <h3 class="font-semibold" id="previewTitle"></h3>
                            <div class="text-sm text-slate-500" id="previewMeta"></div>
                            <p class="mt-2" id="previewDesc"></p>
                        </div>
                    </div>
                </section>

                <!-- View Class Details -->
                <section id="view-class-details-page" class="page-content hidden">
                    <h2 class="text-3xl font-bold text-gray-800 mb-6 border-b pb-2">CS310 - Web Development</h2>
                    <div class="bg-white rounded-lg shadow-lg p-8 scale-in">
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                            <div class="bg-teal-50 rounded-lg p-6 shadow-sm text-center">
                                <p class="text-sm font-medium text-teal-700">Avg. Attendance</p>
                                <p class="text-4xl font-bold text-teal-600 mt-2">91<span class="text-xl">%</span></p>
                            </div>
                            <div class="bg-purple-50 rounded-lg p-6 shadow-sm text-center">
                                <p class="text-sm font-medium text-purple-700">Avg. Grade</p>
                                <p class="text-4xl font-bold text-purple-600 mt-2">88<span class="text-xl">%</span></p>
                            </div>
                            <div class="bg-yellow-50 rounded-lg p-6 shadow-sm text-center">
                                <p class="text-sm font-medium text-yellow-700">Students Enrolled</p>
                                <p class="text-4xl font-bold text-yellow-600 mt-2">45</p>
                            </div>
                        </div>
                        <h3 class="text-xl font-semibold text-gray-800 mb-4">Student List</h3>
                        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                            <div class="p-3 border rounded flex items-center gap-3">
                                <img src="https://i.pravatar.cc/50?img=3" class="w-12 h-12 rounded-full" alt=""/>
                                <div>
                                    <div class="font-semibold">Riya Singh</div>
                                    <div class="text-xs text-slate-500">Present</div>
                                </div>
                            </div>
                            <div class="p-3 border rounded flex items-center gap-3">
                                <img src="https://i.pravatar.cc/50?img=4" class="w-12 h-12 rounded-full" alt=""/>
                                <div>
                                    <div class="font-semibold">Aman Kumar</div>
                                    <div class="text-xs text-slate-500">Absent</div>
                                </div>
                            </div>
                            <div class="bg-gray-100 p-4 rounded-lg flex items-center space-x-4 shadow-sm">
                                <img src="https://placehold.co/60x60/d1d5db/000000?text=S3" class="rounded-full object-cover">
                                <div>
                                    <p class="font-medium text-gray-900">Olivia Brown</p>
                                    <p class="text-sm text-gray-500">Status: Active</p>
                                </div>
                            </div>
                            <div class="bg-gray-100 p-4 rounded-lg flex items-center space-x-4 shadow-sm">
                                <img src="https://placehold.co/60x60/d1d5db/000000?text=S4" class="rounded-full object-cover">
                                <div>
                                    <p class="font-medium text-gray-900">Michael Davis</p>
                                    <p class="text-sm text-gray-500">Status: Active</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Leaderboard Page -->
                <section id="leaderboard-page" class="page-content hidden">
                    <h2 class="text-3xl font-bold text-gray-800 mb-6 border-b pb-2">Leaderboard</h2>
                    <div class="bg-white rounded-lg shadow-lg p-8 scale-in">
                        <div class="flex justify-center items-end space-x-8 mb-8">
                            <div class="flex flex-col items-center">
                                <span class="text-4xl">🥈</span>
                                <p class="text-lg font-semibold mt-2">Alex Chen</p>
                                <p class="text-sm text-gray-500">2nd Place</p>
                            </div>
                            <div class="flex flex-col items-center transform scale-110">
                                <span class="text-5xl">🥇</span>
                                <p class="text-xl font-bold text-blue-600 mt-2">Priya Sharma</p>
                                <p class="text-sm text-gray-500">1st Place</p>
                            </div>
                            <div class="flex flex-col items-center">
                                <span class="text-4xl">🥉</span>
                                <p class="text-lg font-semibold mt-2">Daniel Smith</p>
                                <p class="text-sm text-gray-500">3rd Place</p>
                            </div>
                        </div>
                        <div class="overflow-x-auto rounded-lg border border-gray-200">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Rank</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Name</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Points</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Badges</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">1</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Priya Sharma</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">1250</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm">
                                            <span class="inline-block" title="Top Grader">🏅</span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">2</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Alex Chen</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">1180</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm">
                                            <span class="inline-block" title="Perfect Attendance">💯</span>
                                        </td>
                                    </tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">4</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Vikram</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">860</td><td class="px-6 py-4 whitespace-nowrap text-sm">🏅</td></tr>
                                    <tr><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">5</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Meera</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">820</td><td class="px-6 py-4 whitespace-nowrap text-sm">🎖️</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <!-- Inbox Page -->
                <section id="inbox-page" class="page-content hidden">
                    <h2 class="text-3xl font-bold text-gray-800 mb-6 border-b pb-2">Inbox</h2>
                    <div class="bg-white rounded-lg shadow-lg flex flex-col md:flex-row h-[70vh] overflow-hidden fade-in">
                        <div class="w-full md:w-1/3 border-r border-gray-200 overflow-y-auto">
                            <ul id="messageList" class="p-2">
                                <li class="p-4 border-b border-gray-200 cursor-pointer hover:bg-gray-100 transition-colors" data-msg="1">
                                    <p class="font-bold">New Assignment Uploaded</p>
                                    <p class="text-sm text-gray-500">CS101 - Programming I</p>
                                </li>
                                <li class="p-4 border-b border-gray-200 cursor-pointer hover:bg-gray-100 transition-colors" data-msg="2">
                                    <p class="font-bold">Leave Application Pending</p>
                                    <p class="text-sm text-gray-500">Request from John Doe</p>
                                </li>
                                <li class="p-2 border-b hover:bg-slate-50 cursor-pointer" data-msg="3"><div class="font-semibold">Fee Due - Accounts</div><div class="text-xs text-slate-500">Sep 1</div></li>
                                <li class="p-2 border-b hover:bg-slate-50 cursor-pointer" data-msg="4"><div class="font-semibold">Project extension request</div><div class="text-xs text-slate-500">Aug 30</div></li>
                            </ul>
                        </div>
                        <div class="flex-1 p-6 overflow-y-auto">
                            <h3 class="text-xl font-bold mb-2" id="inboxMessageTitle">Select a message to preview</h3>
                            <p class="text-sm text-gray-500 mb-4" id="inboxMessageFrom"></p>
                            <div class="prose text-gray-700" id="messageContent">
                                <!-- Message content will be loaded here -->
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Social Profile Page -->
                <section id="social-profile-page" class="page-content hidden">
                    <h2 class="text-3xl font-bold text-gray-800 mb-6 border-b pb-2">Social Profile</h2>
                    <div class="bg-white rounded-lg shadow-lg overflow-hidden fade-in">
                        <div class="relative h-48 bg-gray-200">
                            <img src="https://placehold.co/1200x400/9ca3af/ffffff?text=Cover+Photo" alt="Cover Photo" class="w-full h-full object-cover">
                            <img src="https://placehold.co/120x120/4f46e5/ffffff?text=DP" alt="Profile Picture" class="absolute left-6 bottom-0 transform translate-y-1/2 w-24 h-24 rounded-full border-4 border-white object-cover shadow-lg">
                        </div>
                        <div class="p-6 pt-16">
                            <div class="flex justify-between items-center">
                                <h3 class="text-2xl font-bold text-gray-900">Dr. Sarah Johnson</h3>
                                <button class="bg-blue-500 text-white font-medium py-2 px-5 rounded-full shadow-md hover:bg-blue-600 transition-colors">Follow</button>
                            </div>
                            <div class="flex items-center space-x-4 text-gray-500 mt-2">
                                <p>Computer Science Dept.</p>
                                <span>|</span>
                                <p>3 Badges</p>
                            </div>
                            <div class="border-b border-gray-200 mt-6 mb-4">
                                <nav class="flex space-x-8">
                                    <a href="#" class="py-2 text-sm font-medium border-b-2 border-blue-500 text-blue-600 transition-colors">Posts</a>
                                    <a href="#" class="py-2 text-sm font-medium text-gray-500 hover:text-gray-700 transition-colors">Achievements</a>
                                    <a href="#" class="py-2 text-sm font-medium text-gray-500 hover:text-gray-700 transition-colors">Certificates</a>
                                </nav>
                            </div>
                            <div class="space-y-6">
                                <div class="bg-gray-50 p-6 rounded-lg shadow-sm">
                                    <p class="text-gray-800">"Great to see so many students engaging in the new AI ethics course material! Keep up the great work."</p>
                                    <p class="text-sm text-gray-500 mt-2">Posted 2 days ago</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </main>
        </div>
    </div>

    <!-- Modal/Message box for alerts -->
    <div id="message-box" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden items-center justify-center p-4 z-50">
        <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-sm transform transition-all scale-95 duration-300">
            <div class="text-center">
                <p id="message-text" class="text-lg font-medium text-gray-800"></p>
                <button id="close-message-btn" class="mt-4 bg-blue-500 text-white font-medium py-2 px-4 rounded-full shadow-md hover:bg-blue-600 transition-colors">OK</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const sidebarLinks = document.querySelectorAll('.sidebar-link');
            const pageSections = document.querySelectorAll('.page-content');
            const messageBox = document.getElementById('message-box');
            const messageText = document.getElementById('message-text');
            const closeMessageBtn = document.getElementById('close-message-btn');
            const sidebar = document.getElementById('sidebar');
            const burgerBtn = document.getElementById('burger');

            // Function to show custom message box
            const showMessage = (message) => {
                messageText.textContent = message;
                messageBox.classList.remove('hidden');
                messageBox.classList.add('flex');
            };

            // Event listener for closing the message box
            closeMessageBtn.addEventListener('click', () => {
                messageBox.classList.add('hidden');
                messageBox.classList.remove('flex');
            });

            // Handle navigation
            const showPage = (pageId) => {
                // Remove active class from all pages
                pageSections.forEach(page => {
                    page.classList.remove('active');
                    page.classList.add('hidden');
                });
                // Add active class to the selected page
                const activePage = document.getElementById(`${pageId}-page`);
                if (activePage) {
                    activePage.classList.remove('hidden');
                    // Use a small timeout to allow the transition to work
                    setTimeout(() => activePage.classList.add('active'), 10);
                    activePage.scrollTop = 0; // Scroll to top of the new page
                }

                // Close mobile sidebar on navigate
                if (window.innerWidth < 768) {
                    sidebar.classList.remove('mobile-show');
                    sidebar.classList.add('mobile-hidden');
                }
            };

            // Initial page load based on URL hash or default to dashboard
            const currentHash = window.location.hash.substring(1) || 'dashboard';
            showPage(currentHash);

            // Event listener for sidebar links
            sidebarLinks.forEach(link => {
                link.addEventListener('click', (event) => {
                    event.preventDefault();
                    const pageId = event.currentTarget.getAttribute('data-page'); // Use data-page attribute

                    // Update active link styling
                    sidebarLinks.forEach(l => l.classList.remove('active'));
                    event.currentTarget.classList.add('active');

                    // Show the new page
                    showPage(pageId);
                    
                    // Update URL hash for sharing/back button
                    history.pushState(null, '', `#${pageId}`);
                });
            });

            // Handle back/forward button clicks
            window.addEventListener('popstate', () => {
                const currentHash = window.location.hash.substring(1) || 'dashboard';
                showPage(currentHash);
                // Update active link
                sidebarLinks.forEach(link => {
                    if (link.getAttribute('data-page') === currentHash) {
                        link.classList.add('active');
                    } else {
                        link.classList.remove('active');
                    }
                });
            });

            // Burger toggle for mobile sidebar
            burgerBtn.addEventListener('click', () => {
                sidebar.classList.toggle('mobile-hidden');
                sidebar.classList.toggle('mobile-show');
            });

            // Responsive sidebar handling
            function handleResize() {
                if (window.innerWidth < 768) {
                    sidebar.classList.add('absolute', 'z-20', 'left-0', 'top-0', 'h-full', 'bg-white', 'mobile-hidden');
                    sidebar.classList.remove('md:relative');
                } else {
                    sidebar.classList.remove('absolute', 'z-20', 'left-0', 'top-0', 'h-full', 'bg-white', 'mobile-hidden', 'mobile-show');
                    sidebar.classList.add('md:relative');
                    sidebar.style.transform = 'none'; // Ensure it's visible on desktop
                }
            }
            handleResize(); // Initial call
            window.addEventListener('resize', handleResize);

            /* --- Dynamic Data and Form Handling from f3.html & f2.html --- */

            // Docs Verify
            const docsSample = [
                {id:1,student:'John Doe', doc:'Transcript_2024.pdf', status:'pending'},
                {id:2,student:'Jane Smith', doc:'ID_Card.jpg', status:'pending'},
                {id:3,student:'Alex Tan', doc:'Medical_Form.pdf', status:'verified'},
                {id:4,student:'Riya Singh', doc:'ID Proof.pdf', status:'pending'},
                {id:5,student:'Aman Kumar', doc:'Birth Cert.pdf', status:'verified'},
                {id:6,student:'Sonal Mehra', doc:'Fee Receipt.pdf', status:'rejected'},
                {id:7,student:'Vikram', doc:'Passport.pdf', status:'pending'},
            ];

            const docsTable = document.getElementById('docsTable');
            const docsFilter = document.getElementById('docsFilter');
            const pendingDocsCountDisplay = document.getElementById('pendingDocsCount');

            function renderDocs(filter = 'all') {
                docsTable.innerHTML = '';
                const list = docsSample.filter(d => filter === 'all' ? true : d.status === filter);
                list.forEach(d => {
                    const tr = document.createElement('tr');
                    tr.innerHTML = `
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                            <div class="flex items-center gap-3">
                                <img src='https://i.pravatar.cc/40?u=${d.student}' class='w-8 h-8 rounded-full' alt=''>
                                <div><div class='font-semibold'>${d.student}</div></div>
                            </div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-blue-600 hover:underline cursor-pointer">${d.doc}</td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${d.status === 'pending' ? 'bg-yellow-100 text-yellow-800' : d.status === 'verified' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}">${d.status}</span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2">
                            ${d.status === 'pending' ? `
                                <button class="approveBtn text-green-600 hover:text-green-900 transition-colors" data-id="${d.id}">Approve</button>
                                <button class="rejectBtn text-red-600 hover:text-red-900 transition-colors" data-id="${d.id}">Reject</button>
                            ` : `<span class="text-gray-400">N/A</span>`}
                        </td>
                    `;
                    docsTable.appendChild(tr);
                });
                pendingDocsCountDisplay.textContent = docsSample.filter(x => x.status === 'pending').length;
            }
            renderDocs(); // Initial render

            docsFilter.addEventListener('change', (e) => renderDocs(e.target.value));

            docsTable.addEventListener('click', (e) => {
                if (e.target.classList.contains('approveBtn')) {
                    const id = +e.target.dataset.id;
                    const rec = docsSample.find(x => x.id === id);
                    if (rec) {
                        rec.status = 'verified';
                        renderDocs(docsFilter.value);
                        showMessage(`Document for ${rec.student} approved!`);
                    }
                }
                if (e.target.classList.contains('rejectBtn')) {
                    const id = +e.target.dataset.id;
                    const rec = docsSample.find(x => x.id === id);
                    if (rec) {
                        rec.status = 'rejected';
                        renderDocs(docsFilter.value);
                        showMessage(`Document for ${rec.student} rejected!`);
                    }
                }
            });

            // Global Search for Docs
            document.getElementById('globalSearch').addEventListener('input', (e) => {
                const q = e.target.value.toLowerCase();
                if (!q) {
                    renderDocs(docsFilter.value); // Re-render based on current filter if search is cleared
                    return;
                }
                const filtered = docsSample.filter(d =>
                    d.student.toLowerCase().includes(q) || d.doc.toLowerCase().includes(q)
                );
                docsTable.innerHTML = ''; // Clear table
                filtered.forEach(d => {
                    const tr = document.createElement('tr');
                    tr.innerHTML = `
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                            <div class="flex items-center gap-3">
                                <img src='https://i.pravatar.cc/40?u=${d.student}' class='w-8 h-8 rounded-full' alt=''>
                                <div><div class='font-semibold'>${d.student}</div></div>
                            </div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-blue-600 hover:underline cursor-pointer">${d.doc}</td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${d.status === 'pending' ? 'bg-yellow-100 text-yellow-800' : d.status === 'verified' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}">${d.status}</span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2">
                            ${d.status === 'pending' ? `
                                <button class="approveBtn text-green-600 hover:text-green-900 transition-colors" data-id="${d.id}">Approve</button>
                                <button class="rejectBtn text-red-600 hover:text-red-900 transition-colors" data-id="${d.id}">Reject</button>
                            ` : `<span class="text-gray-400">N/A</span>`}
                        </td>
                    `;
                    docsTable.appendChild(tr);
                });
            });


            // Attendance
            const students = ['Alice Johnson', 'Mark Lee', 'Sophie Chen', 'Riya Singh', 'Aman Kumar', 'Sonal Mehra', 'Vikram', 'Meera'];
            const attendanceBody = document.getElementById('attendanceBody');
            const saveAttendanceBtn = document.getElementById('saveAttendance');
            const attendanceMsg = document.getElementById('attendanceMsg');

            function renderAttendance() {
                attendanceBody.innerHTML = '';
                students.forEach((s, i) => {
                    const tr = document.createElement('tr');
                    tr.innerHTML = `
                        <td class="p-2 font-semibold">${s}</td>
                        <td class="p-2 text-center"><input type='checkbox' class="h-5 w-5 rounded text-blue-600 focus:ring-blue-500" data-stu='${i}' data-day='0' ${Math.random() > 0.2 ? 'checked' : ''}/></td>
                        <td class="p-2 text-center"><input type='checkbox' class="h-5 w-5 rounded text-blue-600 focus:ring-blue-500" data-stu='${i}' data-day='1' ${Math.random() > 0.2 ? 'checked' : ''}/></td>
                        <td class="p-2 text-center"><input type='checkbox' class="h-5 w-5 rounded text-blue-600 focus:ring-blue-500" data-stu='${i}' data-day='2' ${Math.random() > 0.2 ? 'checked' : ''}/></td>
                        <td class="p-2 text-center"><input type='checkbox' class="h-5 w-5 rounded text-blue-600 focus:ring-blue-500" data-stu='${i}' data-day='3' ${Math.random() > 0.2 ? 'checked' : ''}/></td>
                        <td class="p-2 text-center"><input type='checkbox' class="h-5 w-5 rounded text-blue-600 focus:ring-blue-500" data-stu='${i}' data-day='4' ${Math.random() > 0.2 ? 'checked' : ''}/></td>
                    `;
                    attendanceBody.appendChild(tr);
                });
            }
            renderAttendance();

            saveAttendanceBtn.addEventListener('click', () => {
                showMessage('Attendance updated successfully!');
                attendanceMsg.textContent = 'Attendance saved ✔️';
                setTimeout(() => attendanceMsg.textContent = '', 3000);
            });

            // Leave Application
            const leaveForm = document.getElementById('leaveForm');
            const leaveFrom = document.getElementById('leaveFrom');
            const leaveTo = document.getElementById('leaveTo');
            const leaveReason = document.getElementById('leaveReason');
            const leaveTimeline = document.getElementById('leaveTimeline');
            const clearLeaveBtn = document.getElementById('clearLeave');
            let leaves = [];

            function renderLeaves() {
                if (leaves.length === 0) {
                    leaveTimeline.innerHTML = '<div class="text-sm text-slate-400">No applications yet.</div>';
                    return;
                }
                leaveTimeline.innerHTML = '';
                leaves.forEach(l => {
                    const el = document.createElement('div');
                    el.className = 'relative pl-4 border-l-2 border-gray-200 mb-4';
                    el.innerHTML = `
                        <span class="absolute -left-2 top-0 h-4 w-4 rounded-full ${l.status === 'Submitted' ? 'bg-green-500' : 'bg-gray-400'} ring-4 ring-white"></span>
                        <p class="text-sm font-semibold ${l.status === 'Submitted' ? 'text-green-700' : 'text-gray-400'}">${l.status}</p>
                        <p class="text-xs text-gray-500">${l.when}</p>
                        <p class="text-sm mt-2">${l.reason} (${l.from} to ${l.to})</p>
                    `;
                    leaveTimeline.appendChild(el);
                });
            }

            leaveForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const from = leaveFrom.value;
                const to = leaveTo.value;
                const reason = leaveReason.value;
                if (!from || !to || !reason) {
                    showMessage('Please fill all required fields for leave application.');
                    return;
                }
                const id = Date.now();
                leaves.unshift({id, from, to, reason, status: 'Submitted', when: new Date().toLocaleString()});
                renderLeaves();
                leaveForm.reset();
                showMessage('Leave application submitted!');
            });

            clearLeaveBtn.addEventListener('click', () => leaveForm.reset());

            // Assignment Upload
            const assignForm = document.getElementById('assignForm');
            const assignTitle = document.getElementById('assignTitle');
            const assignDesc = document.getElementById('assignDesc');
            const assignClass = document.getElementById('assignClass');
            const assignDeadline = document.getElementById('assignDeadline');
            const previewAssignBtn = document.getElementById('previewAssign');
            const publishAssignBtn = document.getElementById('publishAssign');
            const assignPreview = document.getElementById('assignPreview');
            const previewTitle = document.getElementById('previewTitle');
            const previewMeta = document.getElementById('previewMeta');
            const previewDesc = document.getElementById('previewDesc');

            previewAssignBtn.addEventListener('click', (e) => {
                e.preventDefault();
                previewTitle.textContent = assignTitle.value || 'Untitled Assignment';
                previewDesc.textContent = assignDesc.value || 'No description provided.';
                previewMeta.textContent = `${assignClass.value} • Deadline: ${assignDeadline.value || 'Not set'}`;
                assignPreview.classList.remove('hidden');
            });

            assignForm.addEventListener('submit', (e) => {
                e.preventDefault();
                if (!assignTitle.value || !assignDesc.value || !assignDeadline.value) {
                    showMessage('Please fill all required fields for assignment.');
                    return;
                }
                showMessage('Assignment published successfully!');
                assignForm.reset();
                assignPreview.classList.add('hidden');
            });

            // Inbox
            const messageList = document.getElementById('messageList');
            const inboxMessageTitle = document.getElementById('inboxMessageTitle');
            const inboxMessageFrom = document.getElementById('inboxMessageFrom');
            const messageContent = document.getElementById('messageContent');

            const inboxMessages = {
                '1': {
                    title: 'New Assignment Uploaded',
                    from: 'System Notification',
                    content: `<p>Dear Dr. Johnson,</p><p>A new assignment, "Weekly Quiz 3", has been uploaded for the CS101 class. The deadline is set for 2024-11-05.</p><p>Please review and provide feedback to the students.</p><p>Thank you,</p><p>Faculty Portal Team</p>`
                },
                '2': {
                    title: 'Leave Application Pending',
                    from: 'John Doe',
                    content: `<p>Dear Dr. Johnson,</p><p>John Doe has submitted a leave application for 2024-11-01 to 2024-11-03 due to personal reasons. Please review and approve/reject.</p><p>Thank you,</p><p>Admin Team</p>`
                },
                '3': {
                    title: 'Fee Due - Accounts',
                    from: 'Accounts Department',
                    content: `<p>Accounts: Please collect fees by Sep 10.</p>`
                },
                '4': {
                    title: 'Project extension request',
                    from: 'Student Support',
                    content: `<p>Student request: Requesting 3-day extension for project due to illness.</p>`
                }
            };

            messageList.addEventListener('click', (e) => {
                const li = e.target.closest('li');
                if (!li) return;
                const msgId = li.dataset.msg;
                const message = inboxMessages[msgId];

                if (message) {
                    inboxMessageTitle.textContent = message.title;
                    inboxMessageFrom.textContent = `From: ${message.from}`;
                    messageContent.innerHTML = message.content;
                } else {
                    inboxMessageTitle.textContent = 'Message Not Found';
                    inboxMessageFrom.textContent = '';
                    messageContent.innerHTML = '';
                }
            });

            // Accessibility small tweak: keyboard nav for pages
            document.addEventListener('keydown', (e) => {
                if (e.key === '1') showPage('dashboard');
                if (e.key === '2') showPage('docs-verify');
                if (e.key === '3') showPage('attendance');
            });
        });
    </script>
</body>
</html>
